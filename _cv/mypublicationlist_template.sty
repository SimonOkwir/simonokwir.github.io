
\usepackage[sorting=none, maxbibnames=99, mincitenames=99, maxcitenames=99, style=numeric, backend=biber,
            defernumbers=true,isbn=false,url=false,eprint=false]{biblatex}  % For the references
%\DeclareFieldFormat{labelnumberwidth}{}
\setlength{\biblabelsep}{10pt}
\setlength{\bibitemsep}{0.5\baselineskip plus 0.5\baselineskip}

\AtEveryBibitem{\clearlist{language}\clearname{editor}\clearname{note}}

% --- Add bold names --- %

\makeatletter
\def\nhblx@bibfile@name{\jobname -nhblx.bib}
\newwrite\nhblx@bibfile
\immediate\openout\nhblx@bibfile=\nhblx@bibfile@name

\immediate\write\nhblx@bibfile{@comment{Auto-generated file}\blx@nl}

\newcounter{nhblx@name}
\setcounter{nhblx@name}{0}

\newcommand*{\nhblx@writenametobib}[1]{\stepcounter{nhblx@name}\edef\nhblx@tmp@nocite{\noexpand\AfterPreamble{\noexpand\setbox0\noexpand\vbox{\noexpand\nhblx@getmethehash{nhblx@name@\the\value{nhblx@name}}}}}\nhblx@tmp@nocite\immediate\write\nhblx@bibfile{@misc{nhblx@name@\the\value{nhblx@name}, author = {\unexpanded{#1}},options = {dataonly=true,skipbib=true,skipbiblist=true},}}}

\AtEndDocument{\closeout\nhblx@bibfile}

\addbibresource{\nhblx@bibfile@name}

\newcommand*{\nhblx@boldhashes}{}
\DeclareNameFormat{nhblx@hashextract}{\xifinlist{\thefield{hash}}{\nhblx@boldhashes}{}{\listxadd{\nhblx@boldhashes}{\thefield{hash}}}}

\DeclareCiteCommand{\nhblx@getmethehash}{}{\printnames[nhblx@hashextract][1-999]{author}}{}{}

\newcommand*{\addboldnames}{\forcsvlist\nhblx@writenametobib}
\newcommand*{\resetboldnames}{\def\nhblx@boldhashes{}}

\newcommand*{\mkboldifhashinlist}[1]{\xifinlist{\thefield{hash}}{\nhblx@boldhashes}{\mkbibbold{#1}}{#1}}
\makeatother

\DeclareNameWrapperFormat{boldifhashinlist}{\renewcommand*{\mkbibcompletename}{\mkboldifhashinlist}#1}

\DeclareNameWrapperAlias{sortname}{default}
\DeclareNameWrapperAlias{default}{boldifhashinlist}


% --- Add bold names --- %

% DEFINE BOLD NAMES
\addboldnames{ {Ribeiro, Ant\^onio H.}, {Ribeiro, Ant\^onio H}, {Ribeiro, Antonio H.}, {Ribeiro, Antonio H} }

% --- Add all publications (in the header)


{% for p in publications.categories %}
    \DeclareBibliographyCategory{c{{p.name}}}
    \defbibheading{c{{p.name}}}{\subsection*{ {{p.name}}} }
    {% for tag in p.papers %}
        \addtocategory{c{{p.name}}}{ {{ tag }}}
    {% endfor %}
{% endfor %}


% --- listing publications

\newcommand{\printmypublications}
{
    {% for p in publications.categories %}
    \subsection*{ {{p.name}}}
    {% for tag in p.papers %}
        \nocite{ {{ tag }}}
    {% endfor %}
    \newrefcontext[labelprefix={% cycle "P", "J", "C", "W", "N", "T" %} ]
    \printbibliography[category=c{{p.name}}, heading=none]
    {% endfor %}
}

